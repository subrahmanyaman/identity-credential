/*
* This file was generated by the Gradle 'init' task.
*/
buildscript {      // Configuration for building
  repositories {
    jcenter()      // Bintray's repository - a fast Maven Central mirror & more
    mavenCentral()
  }
  dependencies {
    classpath 'com.google.cloud.tools:appengine-gradle-plugin:2.4.3'
    classpath 'org.gretty:gretty:+'
  }
}

plugins {
  id 'java'
  id 'maven-publish'
}

apply plugin: 'org.gretty'
apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'com.google.cloud.tools.appengine'

dependencies {
  implementation 'com.google.appengine:appengine-api-1.0-sdk:1.9.59'
  implementation 'com.google.code.gson:gson:2.9.0'
  implementation 'co.nstant.in:cbor:0.9'
  implementation 'org.json:json:20160810'
  implementation 'org.bouncycastle:bcprov-jdk15on:1.70'
  implementation 'com.google.cloud:google-cloud-storage'
  implementation platform('com.google.cloud:libraries-bom:26.22.0')
  implementation project(path: ':identity')
  testImplementation 'junit:junit:4.12'
  testImplementation 'org.mockito:mockito-core:3.2.4'
  testImplementation 'com.google.appengine:appengine-testing:1.9.64'
  testImplementation 'com.google.appengine:appengine-api-stubs:1.9.64'
  testImplementation 'com.google.appengine:appengine-tools-sdk:1.9.64'
  providedCompile 'javax.servlet:javax.servlet-api:4.0.1'
  providedCompile 'com.google.appengine:appengine:+'
}

appengine {
  deploy {   // deploy configuration
    version = 'v1'
    projectId = 'mdoc-reader-external'
    stopPreviousVersion = true
    promote = true
  }
}

java.sourceCompatibility = JavaVersion.VERSION_11
java.targetCompatibility = JavaVersion.VERSION_11

publishing {
  publications {
      maven(MavenPublication) {
          from(components.java)
      }
  }
}

tasks.withType(JavaCompile) {
  options.encoding = 'UTF-8'
}
